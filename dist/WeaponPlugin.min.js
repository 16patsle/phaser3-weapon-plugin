!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("WeaponPlugin",[],e):"object"==typeof exports?exports.WeaponPlugin=e():t.WeaponPlugin=e()}(window,function(){return function(i){var l={};function n(t){if(l[t])return l[t].exports;var e=l[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}return n.m=i,n.c=l,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(i,l,function(t){return e[t]}.bind(null,l));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,i){"use strict";i.r(e);var r=i(1),l=i(2),n=i(3);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var i=0;i<e.length;i++){var l=e[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function l(t,e){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(i=function(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?o(t):e}(this,a(l).call(this,t,e))).weapons=[],e.registerGameObject("weapon",i.add.bind(o(i)),function(t){return i.add(t.bulletLimit,t.key,t.frame,t.group,t.weaponClass)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(l,Phaser.Plugins.ScenePlugin),function(t,e,i){e&&u(t.prototype,e),i&&u(t,i)}(l,[{key:"add",value:function(t,e,i,l,n){n||(n=r.default);var s=new n(this.scene,t,e,i,l);return this.weapons.push(s),s}},{key:"start",value:function(){this.systems.events.on("postrender",this.postRender,this)}},{key:"boot",value:function(){var t=this.systems.events;t.on("update",this.update,this),t.on("destroy",this.destroy,this)}},{key:"update",value:function(){this.weapons.forEach(function(t){t.update()})}},{key:"postRender",value:function(){this.weapons.forEach(function(t){t.postRender()})}},{key:"destroy",value:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}}]),l}();c.Weapon=r.default,c.Bullet=l.default,c.consts=n.default,e.default=c},function(t,e,i){"use strict";i.r(e);var r=i(2),_=i(3),u=i(4);function l(t,e){for(var i=0;i<e.length;i++){var l=e[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}var n=function(){function s(t,e,i,l,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.scene=t,this.debugPhysics=null,this._bullets=null,this._autoExpandBulletsGroup=!1,this._autofire=!1,this._shots=0,this._fireLimit=0,this._fireRate=100,this._fireRateVariance=0,this._fireFrom=new Phaser.Geom.Rectangle(0,0,1,1),this._fireAngle=_.default.ANGLE_UP,this._bulletInheritSpriteSpeed=!1,this._bulletAnimation="",this._bulletFrameRandom=!1,this._bulletFrameCycle=!1,this._bulletWorldWrap=!1,this._bulletWorldWrapPadding=0,this._bulletAngleOffset=0,this._bulletAngleVariance=0,this._bulletSpeed=200,this._bulletSpeedVariance=0,this._bulletLifespan=0,this._bulletKillDistance=0,this._bulletGravity=new Phaser.Math.Vector2(0,0),this._bulletRotateToVelocity=!1,this._bulletKey=i||"",this._bulletFrame=l||"",this._bulletClass=r.default,this._bulletCollideWorldBounds=!1,this._bulletKillType=_.default.KILL_WORLD_BOUNDS,this._data={customBody:!1,width:0,height:0,offsetX:0,offsetY:0},this._bounds=new Phaser.Geom.Rectangle,this._bulletBounds=this.scene.physics.world.bounds,this._bulletFrames=[],this._bulletFrameIndex=0,this.anims={},this._trackedSprite=null,this._trackedPointer=null,this._multiFire=!1,this._hasFired=!1,this._trackRotation=!1,this._trackOffset=new Phaser.Math.Vector2,this._nextFire=0,this._tempNextFire=0,this._rotatedPoint=new Phaser.Math.Vector2,this.logLevel="warn",this.eventEmitter=new Phaser.Events.EventEmitter,Object(u.default)(this),this.createBullets(e,i,l,n)}return function(t,e,i){e&&l(t.prototype,e),i&&l(t,i)}(s,[{key:"createBullets",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length?arguments[1]:void 0,i=2<arguments.length?arguments[2]:void 0,l=3<arguments.length?arguments[3]:void 0,n=4<arguments.length?arguments[4]:void 0;return n&&(this._bulletClass=n),this.bullets&&!this.bullets.scene&&(this.bullets=null),this.bullets||(this.bullets=this.scene.add.group({classType:this._bulletClass,maxSize:t,runChildUpdate:!0})),0!==t&&(-1===t&&(this.autoExpandBulletsGroup=!0,t=1),this.bullets.createMultiple({key:e,frame:i,repeat:t,active:!1,visible:!1}),this.bullets.children.each(function(t){t.setData("bulletManager",this)},this),this.bulletKey=e,this.bulletFrame=i,l&&l.addMultiple(this.bullets.children.entries)),this}},{key:"forEach",value:function(e,i){var l=arguments;return this.bullets.children.each(function(t){t.active&&e.call(i,t,l)}),this}},{key:"pauseAll",value:function(){return this.bullets.children.each(function(t){t.body.enable=!1,null!==t.getData("timeEvent")&&(t.getData("timeEvent").paused=!0)},this),this}},{key:"resumeAll",value:function(){return this.bullets.children.each(function(t){t.body.enable=!0,null!==t.getData("timeEvent")&&(t.getData("timeEvent").paused=!1)},this),this}},{key:"killAll",value:function(){return this.bullets.children.each(function(t){t.active&&t.kill(),t.body.enable=!0}),this}},{key:"resetShots",value:function(t){return void(this.shots=0)!==t&&(this.fireLimit=t),this}},{key:"trackSprite",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.trackedPointer=null,this.trackedSprite=t,this.trackRotation=l,this.trackOffset.set(e,i),this}},{key:"trackPointer",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return void 0===t&&this.scene.input&&(t=this.scene.input.activePointer),this.trackedPointer=t,this.trackedSprite=null,this.trackRotation=!1,this.trackOffset.set(e,i),this}},{key:"fireMany",value:function(t,e){var i=this;this.multiFire=!0;var l=[];return e||this.trackedSprite||this.trackedPointer?t.forEach(function(t){l.push(i.fire(e,null,null,t.x,t.y))}):t.forEach(function(t){l.push(i.fire(t))}),l}},{key:"fireOffset",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.fire(null,null,null,t,e)}},{key:"fireAtPointer",value:function(t){return void 0===t&&this.scene.input&&(t=this.scene.input.activePointer),this.fire(null,t.x,t.y)}},{key:"fireAtSprite",value:function(t){return this.fire(null,t.x,t.y)}},{key:"fireAtXY",value:function(t,e){return this.fire(null,t,e)}},{key:"fire",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;if(this.scene.time.now<this._nextFire||0<this.fireLimit&&this.shots===this.fireLimit)return null;var s=this.bulletSpeed;0!==this.bulletSpeedVariance&&(s+=Phaser.Math.Between(-this.bulletSpeedVariance,this.bulletSpeedVariance)),t?this.updateFireFrom(t.x,t.y):this.trackedSprite?(this.trackRotation?(this._rotatedPoint.set(this.trackedSprite.x+this.trackOffset.x,this.trackedSprite.y+this.trackOffset.y),Phaser.Math.RotateAround(this._rotatedPoint,this.trackedSprite.x,this.trackedSprite.y,this.trackedSprite.rotation),this.updateFireFrom(this._rotatedPoint.x,this._rotatedPoint.y)):this.updateFireFrom(this.trackedSprite.x,this.trackedSprite.y),this.bulletInheritSpriteSpeed&&(s+=this.trackedSprite.body.speed)):this.trackedPointer&&this.updateFireFrom(this.trackedPointer.x,this.trackedPointer.y),this.fireFrom.x+=l,this.fireFrom.y+=n;var r=this.fireFrom.x+Math.random()*this.fireFrom.width,u=this.fireFrom.y+Math.random()*this.fireFrom.height,a=1<this.fireFrom.width?r:this.fireFrom.x,o=1<this.fireFrom.height?u:this.fireFrom.y,h=this.trackRotation?this.trackedSprite.angle:this.fireAngle;null!==e&&null!==i&&(h=Phaser.Math.RadToDeg(Math.atan2(i-o,e-a))),0!==this.bulletAngleVariance&&(h+=Phaser.Math.Between(-this.bulletAngleVariance,this.bulletAngleVariance));var c=0,f=0;0===h||180===h?c=Math.cos(Phaser.Math.DegToRad(h))*s:f=(90===h||270===h||(c=Math.cos(Phaser.Math.DegToRad(h))*s),Math.sin(Phaser.Math.DegToRad(h))*s);var d=null;if(this.autoExpandBulletsGroup?(d=this.bullets.getFirstDead(!0,a,o,this.bulletKey,this.bulletFrame)).setData("bulletManager",this):d=this.bullets.getFirstDead(!1),d){if(d.prepare(a,o),d.setData({fromX:a,fromY:o,killType:this.bulletKillType,killDistance:this.bulletKillDistance,rotateToVelocity:this.bulletRotateToVelocity}),this.bulletKillType===_.default.KILL_LIFESPAN&&(d.setData("timeEvent",this.scene.time.addEvent({delay:this.bulletLifespan,callback:d.kill,callbackScope:d})),d.lifespan=this.bulletLifespan),d.angle=h+this.bulletAngleOffset,this.bulletAnimation)d.anims.play(this.bulletAnimation);else if(this.bulletFrameCycle)this.bulletFrameIndex>=this.bulletFrames.length&&(this.bulletFrameIndex=0),d.setTexture(this.bulletKey,this.bulletFrameIndex),this.bulletFrameIndex++;else if(this.bulletFrameRandom){var b=Math.floor(Math.random()*this.bulletFrames.length);d.setTexture(this.bulletKey,b)}d.getData("bodyDirty")&&(this._data.customBody&&(d.body.setSize(this._data.width,this._data.height),d.body.setOffset(this._data.offsetX,this._data.offsetY)),d.body.collideWorldBounds=this.bulletCollideWorldBounds,d.setData("bodyDirty",!1)),d.body.setVelocity(c,f),d.body.setGravity(this.bulletGravity.x,this.bulletGravity.y);var y=0;if(0!==this.bulletSpeedVariance){var p=this.fireRate;(p+=Phaser.Math.Between(-this.fireRateVariance,this.fireRateVariance))<0&&(p=0),y=this.scene.time.now+p}else y=this.scene.time.now+this.fireRate;this.multiFire?this._hasFired||(this._hasFired=!0,this._tempNextFire=y,this.shots++):(this._nextFire=y,this.shots++),this.eventEmitter.emit("fire",d,this,s),0<this.fireLimit&&this.shots===this.fireLimit&&this.eventEmitter.emit("firelimit",this,this.fireLimit)}return d}},{key:"updateFireFrom",value:function(t,e){1<this.fireFrom.width?Phaser.Geom.Rectangle.CenterOn(this.fireFrom,t+this.trackOffset.x,e+this.trackOffset.y):(this.fireFrom.x=t+this.trackOffset.x,this.fireFrom.y=e+this.trackOffset.y)}},{key:"setBulletBodyOffset",value:function(e,i){var l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return this._data.customBody=!0,this._data.width=e,this._data.height=i,this._data.offsetX=l,this._data.offsetY=n,this.bullets.children.each(function(t){t.body.setSize(e,i),t.body.setOffset(l,n),t.setData("bodyDirty",!1)}),this}},{key:"setBulletFrames",value:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:_.default.BULLET_FRAME_STABLE;return("number"!=typeof i||i<_.default.BULLET_FRAME_STABLE||i>_.default.BULLET_FRAME_RANDOM)&&Object(u.log)("Invalid bullet frame selection method specified: ".concat(i),this.logLevel),e<t&&Object(u.log)("min frame (".concat(t,") must be <= max frame (").concat(e,")"),this.logLevel),this.bulletFrames=Phaser.Utils.Array.NumberArray(t,e),this.bulletFrameIndex=0,this.bulletFrameCycle=i===_.default.BULLET_FRAME_CYCLE,this.bulletFrameRandom=i===_.default.BULLET_FRAME_RANDOM,this}},{key:"addBulletAnimation",value:function(t,e,i,l){return this.scene.sys.anims.anims.contains(t)||(this.scene.sys.anims.create({key:t,frames:e,frameRate:i,loop:l}),this.anims[t]=this.scene.sys.anims.anims.entries[t]),this.bulletAnimation=t,this}},{key:"update",value:function(){this._bulletKillType===_.default.KILL_WEAPON_BOUNDS&&(this.trackedSprite?(this.trackedSprite.updateTransform(),Phaser.Geom.Rectangle.CenterOn(this.bounds,this.trackedSprite.x,this.trackedSprite.y)):this.trackedPointer&&Phaser.Geom.Rectangle.CenterOn(this.bounds,this.trackedPointer.x,this.trackedPointer.y)),this.autofire&&this.fire()}},{key:"postRender",value:function(){this.multiFire&&this._hasFired&&(this._hasFired=!1,this._nextFire=this._tempNextFire)}},{key:"destroy",value:function(){this.scene=null,this.bullets.destroy(!0)}},{key:"bullets",get:function(){return this._bullets},set:function(t){this._bullets=t,Object(u.default)(this,"bullets")}},{key:"autoExpandBulletsGroup",get:function(){return this._autoExpandBulletsGroup},set:function(t){this._autoExpandBulletsGroup=t,Object(u.default)(this,"autoExpandBulletsGroup")}},{key:"autofire",get:function(){return this._autofire},set:function(t){this._autofire=t,Object(u.default)(this,"autofire")}},{key:"shots",get:function(){return this._shots},set:function(t){this._shots=t,Object(u.default)(this,"shots")}},{key:"fireLimit",get:function(){return this._fireLimit},set:function(t){this._fireLimit=t,Object(u.default)(this,"fireLimit")}},{key:"fireRate",get:function(){return this._fireRate},set:function(t){this._fireRate=t,Object(u.default)(this,"fireRate")}},{key:"fireRateVariance",get:function(){return this._fireRateVariance},set:function(t){this._fireRateVariance=t,Object(u.default)(this,"fireRateVariance")}},{key:"fireFrom",get:function(){return this._fireFrom},set:function(t){this._fireFrom=t,Object(u.default)(this,"fireFrom")}},{key:"fireAngle",get:function(){return this._fireAngle},set:function(t){this._fireAngle=t,Object(u.default)(this,"fireAngle")}},{key:"bulletInheritSpriteSpeed",get:function(){return this._bulletInheritSpriteSpeed},set:function(t){this._bulletInheritSpriteSpeed=t,Object(u.default)(this,"bulletInheritSpriteSpeed")}},{key:"bulletAnimation",get:function(){return this._bulletAnimation},set:function(t){this._bulletAnimation=t,Object(u.default)(this,"bulletAnimation")}},{key:"bulletFrameRandom",get:function(){return this._bulletFrameRandom},set:function(t){this._bulletFrameRandom=t,Object(u.default)(this,"bulletFrameRandom")}},{key:"bulletFrameCycle",get:function(){return this._bulletFrameCycle},set:function(t){this._bulletFrameCycle=t,Object(u.default)(this,"bulletFrameCycle")}},{key:"bulletWorldWrap",get:function(){return this._bulletWorldWrap},set:function(t){this._bulletWorldWrap=t,Object(u.default)(this,"bulletWorldWrap")}},{key:"bulletWorldWrapPadding",get:function(){return this._bulletWorldWrapPadding},set:function(t){this._bulletWorldWrapPadding=t,Object(u.default)(this,"bulletWorldWrapPadding")}},{key:"bulletAngleOffset",get:function(){return this._bulletAngleOffset},set:function(t){this._bulletAngleOffset=t,Object(u.default)(this,"bulletAngleOffset")}},{key:"bulletAngleVariance",get:function(){return this._bulletAngleVariance},set:function(t){this._bulletAngleVariance=t,Object(u.default)(this,"bulletAngleVariance")}},{key:"bulletSpeed",get:function(){return this._bulletSpeed},set:function(t){this._bulletSpeed=t,Object(u.default)(this,"bulletSpeed")}},{key:"bulletSpeedVariance",get:function(){return this._bulletSpeedVariance},set:function(t){this._bulletSpeedVariance=t,Object(u.default)(this,"bulletSpeedVariance")}},{key:"bulletLifespan",get:function(){return this._bulletLifespan},set:function(t){this._bulletLifespan=t,Object(u.default)(this,"bulletLifespan")}},{key:"bulletKillDistance",get:function(){return this._bulletKillDistance},set:function(t){this._bulletKillDistance=t,Object(u.default)(this,"bulletKillDistance")}},{key:"bulletGravity",get:function(){return this._bulletGravity},set:function(t){this._bulletGravity=t,Object(u.default)(this,"bulletGravity")}},{key:"bulletRotateToVelocity",get:function(){return this._bulletRotateToVelocity},set:function(t){this._bulletRotateToVelocity=t,Object(u.default)(this,"bulletRotateToVelocity")}},{key:"bulletKey",get:function(){return this._bulletKey},set:function(t){this._bulletKey=t,Object(u.default)(this,"bulletKey")}},{key:"bulletFrame",get:function(){return this._bulletFrame},set:function(t){this._bulletFrame=t,Object(u.default)(this,"bulletFrame")}},{key:"bulletClass",get:function(){return this._bulletClass},set:function(t){this._bulletClass=t,this.bullets&&(this.bullets.classType=this._bulletClass),Object(u.default)(this,"bulletClass")}},{key:"bulletCollideWorldBounds",get:function(){return this._bulletCollideWorldBounds},set:function(e){this._bulletCollideWorldBounds=e,this.bullets.children.each(function(t){t.body.collideWorldBounds=e,t.setData("bodyDirty",!1)}),Object(u.default)(this,"bulletCollideWorldBounds")}},{key:"bulletKillType",get:function(){return this._bulletKillType},set:function(t){switch(t){case _.default.KILL_STATIC_BOUNDS:case _.default.KILL_WEAPON_BOUNDS:this.bulletBounds=this.bounds;break;case _.default.KILL_CAMERA_BOUNDS:this.bulletBounds=this.scene.sys.cameras.main._bounds;break;case _.default.KILL_WORLD_BOUNDS:this.bulletBounds=this.scene.physics.world.bounds}this._bulletKillType=t,Object(u.default)(this,"bulletKillType")}},{key:"bounds",get:function(){return this._bounds},set:function(t){this._bounds=t,Object(u.default)(this,"bounds")}},{key:"bulletBounds",get:function(){return this._bulletBounds},set:function(t){this._bulletBounds=t,Object(u.default)(this,"bulletBounds")}},{key:"bulletFrames",get:function(){return this._bulletFrames},set:function(t){this._bulletFrames=t,Object(u.default)(this,"bulletFrames")}},{key:"bulletFrameIndex",get:function(){return this._bulletFrameIndex},set:function(t){this._bulletFrameIndex=t,Object(u.default)(this,"bulletFrameIndex")}},{key:"trackedSprite",get:function(){return this._trackedSprite},set:function(t){this._trackedSprite=t,Object(u.default)(this,"trackedSprite")}},{key:"trackedPointer",get:function(){return this._trackedPointer},set:function(t){this._trackedPointer=t,Object(u.default)(this,"trackedPointer")}},{key:"multiFire",get:function(){return this._multiFire},set:function(t){this._multiFire=t,Object(u.default)(this,"multiFire")}},{key:"trackRotation",get:function(){return this._trackRotation},set:function(t){this._trackRotation=t,Object(u.default)(this,"trackRotation")}},{key:"trackOffset",get:function(){return this._trackOffset},set:function(t){this._trackOffset=t,Object(u.default)(this,"trackOffset")}},{key:"x",get:function(){return this.fireFrom.x},set:function(t){this.fireFrom.x=t}},{key:"y",get:function(){return this.fireFrom.y},set:function(t){this.fireFrom.y=t}}]),s}();e.default=n},function(t,e,i){"use strict";i.r(e);var l=i(3);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){for(var i=0;i<e.length;i++){var l=e[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=0,r=function(t){function r(t,e,i,l,n){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(s=function(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?o(t):e}(this,a(r).call(this,t,e,i,l,n))).bulletID=h,h++,s.scene.physics.add.existing(o(s)),s.setDataEnabled(),s.setData({timeEvent:null,bulletManager:null,fromX:0,fromY:0,bodyDirty:!0,rotateToVelocity:!1,killType:0,killDistance:0,bodyBounds:new Phaser.Geom.Rectangle}),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(r,Phaser.GameObjects.Sprite),function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(r,[{key:"prepare",value:function(t,e){this.setActive(!0),this.setVisible(!0),this.body.enable=!0,this.body.reset(t,e),this.body.debugShowBody=this.getData("bulletManager").debugPhysics,this.body.debugShowVelocity=this.getData("bulletManager").debugPhysics}},{key:"kill",value:function(){return this.body.stop(),this.body.enable=!1,this.setActive(!1),this.setVisible(!1),this.body.debugShowBody=!1,this.body.debugShowVelocity=!1,null!==this.getData("timeEvent")&&(this.getData("timeEvent").destroy(),this.setData("timeEvent",null)),this.getData("bulletManager").eventEmitter.emit("kill",this),this}},{key:"update",value:function(){this.active&&(this.getData("killType")>l.default.KILL_LIFESPAN&&(this.getData("killType")===l.default.KILL_DISTANCE?new Phaser.Math.Vector2(this.getData("fromX"),this.getData("fromY")).distance(this)>this.getData("killDistance")&&this.kill():Phaser.Geom.Intersects.RectangleToRectangle(this.getData("bulletManager").bulletBounds,this.body.getBounds(this.getData("bodyBounds")))||this.kill()),this.getData("rotateToVelocity")&&(this.rotation=this.body.velocity.atan()),this.getData("bulletManager").bulletWorldWrap&&this.scene.physics.world.wrap(this,this.getData("bulletManager").bulletWorldWrapPadding))}}]),r}();e.default=r},function(t,e,i){"use strict";i.r(e),e.default={KILL_NEVER:0,KILL_LIFESPAN:1,KILL_DISTANCE:2,KILL_WEAPON_BOUNDS:3,KILL_CAMERA_BOUNDS:4,KILL_WORLD_BOUNDS:5,KILL_STATIC_BOUNDS:6,ANGLE_UP:270,ANGLE_DOWN:90,ANGLE_LEFT:180,ANGLE_RIGHT:0,ANGLE_NORTH_EAST:315,ANGLE_NORTH_WEST:225,ANGLE_SOUTH_EAST:45,ANGLE_SOUTH_WEST:135,BULLET_FRAME_STABLE:0,BULLET_FRAME_CYCLE:1,BULLET_FRAME_RANDOM:2}},function(t,e,i){"use strict";i.r(e),i.d(e,"log",function(){return n});var l=i(3);function n(t,e){if("warn"===e)console.warn(t);else if("error"===e)throw new Error(t)}e.default=function(t,e){["bulletWorldWrap","bulletKillType"].includes(e)&&t.bulletWorldWrap&&(t.bulletKillType===l.default.KILL_WORLD_BOUNDS||t.bulletKillType===l.default.KILL_WEAPON_BOUNDS)&&n("Warning: KILL_WORLD_BOUNDS and KILL_WEAPON_BOUNDS does not work well with bulletWorldWrap set to true.",t.logLevel),["bulletKillType","bulletLifespan"].includes(e)&&t.bulletKillType===l.default.KILL_LIFESPAN&&t.bulletLifespan<0&&n("Invalid bulletLifespan; must be > 0; currently "+t.bulletLifespan,t.logLevel),["fireLimit","fireRate","fireRateVariance","bulletAngleVariance","bulletSpeedVariance","bulletKillDistance"].includes(e)&&t[e]<0&&n("Invalid "+e+"; must be >= 0; currently "+t[e],t.logLevel)}}]).default});
//# sourceMappingURL=WeaponPlugin.min.js.map